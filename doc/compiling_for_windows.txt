#Compiling the lpaggreg library for Windows

The following steps are for the Qt creator IDE configured with mingw32:

##Create the lpaggreg static library: 
	Create a new project and compile it as a static library. It should result in a .a file.

##Create the lpaggregjni DLL: 
	1. Create a new project with only the file generated by switf (lpaggreg_wrap.cxx). It is the same for both Linux and Windows.
	2. In the .pro file, add the include path to the jni headers (installed with a jdk), and to the header of the lpaggreg library
	3. In order to include the static library lpaggreg in the DLL, add the following option to the LIBS variable:
		
		-static -Wl,--whole-archive -L [PATH_TO_LIB] -l lpaggreg -Wl,--no-whole-archive

	4. In order for the symbols to be exported correctly, you should also add the following options to the LIBS variable:
	
		-D_JNI_IMPLEMENTATION_ -Wl,--kill-at

	5. Then compile the project which should generate the DLL.

#Appendix

The Qt Creator project file (.pro) for lpaggregjni:

#-------------------------------------------------
#
# Project created by QtCreator 2014-12-01T15:06:26
#
#-------------------------------------------------

QT       -= core

TARGET = lpaggregjni
TEMPLATE = lib

DEFINES += LPAGGREGJNI_LIBRARY

SOURCES += E:/lpaggregjni/lpaggreg_wrap.cxx

INCLUDEPATH += E:\jdkinclude\include\
INCLUDEPATH += E:\jdkinclude\include\win32
INCLUDEPATH += E:\include\

LIBS += -D_JNI_IMPLEMENTATION_ -Wl,--kill-at -static -Wl,--whole-archive -L E:\lib\x86_mingw32 -l lpaggreg -Wl,--no-whole-archive

